<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YourTrip Analytics - Singapore Transport Data</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container">
            <h1 class="dashboard-title">YourTrip Analytics</h1>
            <p class="dashboard-subtitle">Singapore Transport Data</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container dashboard-container">

        <!-- Top Metrics Cards (All Transport Modes) -->
        <section id="top-metrics" class="section">
            <div class="row g-3">
                <div class="col-md">
                    <div class="metric-card" data-scroll-to="ridership-trends">
                        <div class="metric-label">MOST POPULAR MODE</div>
                        <div class="metric-value" id="metric-popular-mode">Loading...</div>
                        <div class="metric-description">Highest total ridership</div>
                    </div>
                </div>
                <div class="col-md">
                    <div class="metric-card" data-scroll-to="ridership-trends">
                        <div class="metric-label">PEAK MONTH</div>
                        <div class="metric-value" id="metric-peak-month">Loading...</div>
                        <div class="metric-description">Highest combined ridership</div>
                    </div>
                </div>
                <div class="col-md">
                    <div class="metric-card" data-scroll-to="busiest-stops">
                        <div class="metric-label">TRANSPORT HUBS</div>
                        <div class="metric-value" id="metric-hubs">Loading...</div>
                        <div class="metric-description">Bus stops + MRT stations</div>
                    </div>
                </div>
                <div class="col-md">
                    <div class="metric-card" data-scroll-to="ridership-trends">
                        <div class="metric-label">DAILY RIDERSHIP</div>
                        <div class="metric-value" id="metric-daily">Loading...</div>
                        <div class="metric-description">Average daily passengers</div>
                    </div>
                </div>
                <div class="col-md">
                    <div class="metric-card">
                        <div class="metric-label">TRANSPORT MODES</div>
                        <div class="metric-value" id="metric-modes">Loading...</div>
                        <div class="metric-description">MRT, LRT, Public Bus</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Transport Mode Ridership Trends -->
        <section id="ridership-trends" class="section">
            <div class="card chart-card">
                <div class="card-body">
                    <div class="chart-header">
                        <h2 class="chart-title">Transport Mode Ridership Trends</h2>
                        <div class="chart-controls">
                            <label for="year-selector" class="year-label">Year:</label>
                            <select id="year-selector" class="year-selector">
                                <option value="">Loading...</option>
                            </select>
                        </div>
                    </div>
                    <div id="ridership-chart" class="chart-container">
                        <div class="loading-spinner">Loading chart...</div>
                    </div>
                    <div class="chart-legend" id="ridership-legend"></div>
                </div>
            </div>
        </section>

        <!-- Bus Network Analysis Section Header -->
        <section class="section-header">
            <h2 class="section-title">Bus Network Analysis</h2>
        </section>

        <!-- Bus Metrics Cards -->
        <section id="bus-metrics" class="section">
            <div class="row g-3">
                <div class="col-md-3">
                    <div class="metric-card metric-card-secondary">
                        <div class="metric-label">TOTAL BUS ROUTES</div>
                        <div class="metric-value" id="bus-total-routes">Loading...</div>
                        <div class="metric-description">Distinct bus services</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card metric-card-secondary">
                        <div class="metric-label">SINGLE-OPERATOR STOPS</div>
                        <div class="metric-value" id="bus-single-operator">Loading...</div>
                        <div class="metric-description">Served by one operator</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card metric-card-secondary">
                        <div class="metric-label">ABOVE-AVG ROUTES</div>
                        <div class="metric-value" id="bus-above-avg">Loading...</div>
                        <div class="metric-description">Higher than average ridership</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card metric-card-secondary">
                        <div class="metric-label">PEAK HOUR USAGE</div>
                        <div class="metric-value" id="bus-peak-usage">Loading...</div>
                        <div class="metric-description">7-9 AM, 5-7 PM ridership</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Peak vs Off-Peak Bar Chart -->
        <section id="peak-offpeak" class="section">
            <div class="card chart-card">
                <div class="card-body">
                    <h2 class="chart-title">Peak vs Off-Peak Ridership</h2>
                    <div id="peak-offpeak-chart" class="chart-container">
                        <div class="loading-spinner">Loading chart...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Hourly Ridership Heatmap -->
        <section id="hourly-heatmap" class="section">
            <div class="card chart-card">
                <div class="card-body">
                    <h2 class="chart-title">Hourly Ridership Pattern</h2>
                    <div id="hourly-heatmap-chart" class="chart-container">
                        <div class="loading-spinner">Loading heatmap...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Top 10 Busiest Bus Stops -->
        <section id="busiest-stops" class="section">
            <div class="card chart-card">
                <div class="card-body">
                    <h2 class="chart-title">Top 10 Busiest Bus Stops</h2>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="table-container">
                                <table class="table table-hover" id="busiest-stops-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Stop ID</th>
                                            <th>Stop Name</th>
                                            <th>Total Boarding</th>
                                            <th>Location</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center">Loading...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="stops-map" class="map-container"></div>
                            <div class="map-legend">
                                <span class="legend-item"><span class="legend-dot" style="background: #ef4444;"></span> Rank 1 (Busiest)</span>
                                <span class="legend-item"><span class="legend-dot" style="background: #f97316;"></span> Rank 2</span>
                                <span class="legend-item"><span class="legend-dot" style="background: #eab308;"></span> Rank 3</span>
                                <span class="legend-item"><span class="legend-dot" style="background: #22c55e;"></span> Rank 4-10</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="container">
            <p>&copy; 2025 YourTrip Analytics - Singapore Transport Data Dashboard</p>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Custom JavaScript Modules -->
    <script src="js/api.js"></script>
    <script src="js/metrics.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/map.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
